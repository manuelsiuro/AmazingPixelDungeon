#!/usr/bin/env python3
"""Create hand-crafted 16x16 pixel-art crafting sprites and extend items.png."""

import os
from PIL import Image

SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT = os.path.join(SCRIPT_DIR, "..", "..")
ITEMS_PNG = os.path.join(PROJECT_ROOT, "app", "src", "main", "assets", "items.png")
OUTPUT_DIR = os.path.join(SCRIPT_DIR, "output")

TILE_SIZE = 16
COLS = 8  # items.png is 128px wide = 8 columns of 16px

# -- Transparent alias --
_ = 0

# ============================================================
# Each sprite: (name, index, palette dict, 16x16 grid)
#   palette maps int keys (1,2,3...) to RGBA tuples
#   0 is always transparent
# ============================================================

# ---- MATERIALS (10) ----

COBBLESTONE = (
    "cobblestone", 156,
    {1: (30, 30, 30, 255),      # dark outline
     2: (120, 120, 115, 255),   # base gray
     3: (85, 85, 80, 255),      # shadow gray
     4: (155, 155, 148, 255),   # highlight gray
     5: (100, 100, 95, 255)},   # mid gray
    # Three rough stone chunks clustered
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,1,4,4,2,2,1,_,_,_,_,_,_],
        [_,_,_,_,1,4,2,2,3,1,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,_,_,_,_,_,_,_],
        [_,_,1,1,1,1,_,_,1,1,1,1,_,_,_,_],
        [_,1,4,4,2,5,1,1,4,4,2,3,1,_,_,_],
        [_,1,4,2,5,3,1,1,4,2,2,3,1,_,_,_],
        [_,1,2,5,3,3,1,1,2,5,3,3,1,_,_,_],
        [_,_,1,1,1,1,_,_,1,1,1,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

FIBER = (
    "fiber", 157,
    {1: (30, 40, 20, 255),      # dark outline
     2: (100, 130, 60, 255),    # green base
     3: (70, 95, 40, 255),      # green shadow
     4: (130, 160, 80, 255),    # green highlight
     5: (110, 90, 50, 255),     # brown accent
     6: (85, 70, 40, 255)},     # brown shadow
    # Twisted bundle of plant fibers
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,4,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,4,2,3,1,_,_,_,_,_],
        [_,_,_,_,_,1,4,2,5,2,3,1,_,_,_,_],
        [_,_,_,_,1,4,2,5,6,5,2,1,_,_,_,_],
        [_,_,_,_,1,2,5,6,5,6,3,1,_,_,_,_],
        [_,_,_,_,1,2,6,5,6,5,3,1,_,_,_,_],
        [_,_,_,_,1,3,5,6,5,2,3,1,_,_,_,_],
        [_,_,_,_,_,1,2,5,2,3,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,2,3,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

STICK = (
    "stick", 158,
    {1: (35, 25, 15, 255),      # dark outline
     2: (140, 100, 55, 255),    # base brown
     3: (105, 70, 35, 255),     # shadow brown
     4: (175, 135, 80, 255),    # highlight brown
     5: (80, 120, 50, 255)},    # leaf green
    # Simple diagonal branch with small leaf
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,1,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,1,4,1,_,_],
        [_,_,_,_,_,_,_,_,_,_,1,4,2,1,_,_],
        [_,_,_,_,_,_,_,_,_,1,4,2,1,_,_,_],
        [_,_,_,_,_,_,_,_,1,4,2,1,5,5,_,_],
        [_,_,_,_,_,_,_,1,4,2,1,_,5,_,_,_],
        [_,_,_,_,_,_,1,4,2,3,1,_,_,_,_,_],
        [_,_,_,_,_,1,4,2,3,1,_,_,_,_,_,_],
        [_,_,_,_,1,4,2,3,1,_,_,_,_,_,_,_],
        [_,_,_,1,4,2,3,1,_,_,_,_,_,_,_,_],
        [_,_,_,1,2,3,1,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,1,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

WOOD_PLANK = (
    "wood_plank", 159,
    {1: (50, 35, 15, 255),      # dark outline
     2: (170, 130, 70, 255),    # base tan
     3: (130, 95, 50, 255),     # shadow
     4: (200, 160, 95, 255),    # highlight
     5: (150, 115, 60, 255)},   # grain line
    # Flat rectangular plank with wood grain
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,1,4,4,4,4,4,4,4,4,4,4,2,3,1,_],
        [_,1,4,2,5,2,2,5,2,2,5,2,2,3,1,_],
        [_,1,2,2,2,5,2,2,5,2,2,5,2,3,1,_],
        [_,1,2,5,2,2,5,2,2,5,2,2,3,3,1,_],
        [_,1,2,2,5,2,2,5,2,2,5,2,3,3,1,_],
        [_,1,3,2,2,5,2,2,5,2,2,3,3,3,1,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

IRON_ORE = (
    "iron_ore", 160,
    {1: (25, 25, 30, 255),      # dark outline
     2: (90, 85, 80, 255),      # base dark gray
     3: (60, 55, 55, 255),      # shadow
     4: (130, 125, 120, 255),   # highlight
     5: (170, 170, 180, 255),   # metallic streak
     6: (110, 105, 100, 255)},  # mid gray
    # Dark rock with silver metallic streaks
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,1,4,4,2,6,1,_,_,_,_,_],
        [_,_,_,_,1,4,5,2,5,2,3,1,_,_,_,_],
        [_,_,_,1,4,2,2,5,2,2,6,3,1,_,_,_],
        [_,_,_,1,4,2,5,2,2,6,3,3,1,_,_,_],
        [_,_,_,1,2,5,2,2,5,2,3,3,1,_,_,_],
        [_,_,_,1,2,2,2,5,6,3,3,3,1,_,_,_],
        [_,_,_,_,1,2,6,3,3,3,3,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

IRON_INGOT = (
    "iron_ingot", 161,
    {1: (25, 25, 30, 255),      # dark outline
     2: (140, 140, 145, 255),   # base silver
     3: (100, 100, 105, 255),   # shadow
     4: (180, 180, 190, 255),   # highlight
     5: (220, 220, 230, 255),   # specular
     6: (120, 120, 125, 255)},  # mid tone
    # Trapezoidal metal bar, polished
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,1,5,5,4,4,4,2,1,_,_,_,_],
        [_,_,_,1,5,4,4,4,4,2,2,3,1,_,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,4,4,2,2,2,2,6,6,3,1,_,_],
        [_,_,1,4,4,2,2,2,2,6,6,3,3,1,_,_],
        [_,_,1,4,2,2,2,2,6,6,3,3,3,1,_,_],
        [_,_,_,1,1,1,1,1,1,1,1,1,1,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

GOLD_ORE = (
    "gold_ore", 162,
    {1: (40, 30, 15, 255),      # dark outline
     2: (110, 90, 60, 255),     # base brown-gray
     3: (75, 60, 40, 255),      # shadow
     4: (140, 115, 75, 255),    # highlight
     5: (220, 190, 50, 255),    # gold streak
     6: (180, 150, 30, 255)},   # gold shadow
    # Brown rock with gold-yellow streaks
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,1,4,4,2,2,1,_,_,_,_,_],
        [_,_,_,_,1,4,5,2,6,2,3,1,_,_,_,_],
        [_,_,_,1,4,2,6,5,2,2,2,3,1,_,_,_],
        [_,_,_,1,4,5,2,2,5,6,3,3,1,_,_,_],
        [_,_,_,1,2,6,5,2,6,2,3,3,1,_,_,_],
        [_,_,_,1,2,2,2,5,2,3,3,3,1,_,_,_],
        [_,_,_,_,1,2,6,3,3,3,3,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

GOLD_INGOT = (
    "gold_ingot", 163,
    {1: (80, 55, 10, 255),      # dark outline
     2: (220, 180, 40, 255),    # base gold
     3: (170, 130, 20, 255),    # shadow gold
     4: (245, 210, 70, 255),    # highlight gold
     5: (255, 240, 140, 255),   # specular
     6: (195, 155, 30, 255)},   # mid tone
    # Golden yellow bar, shiny, warm glow
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,1,5,5,4,4,4,2,1,_,_,_,_],
        [_,_,_,1,5,4,4,4,4,2,2,3,1,_,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,4,4,2,2,2,2,6,6,3,1,_,_],
        [_,_,1,4,4,2,2,2,2,6,6,3,3,1,_,_],
        [_,_,1,4,2,2,2,2,6,6,3,3,3,1,_,_],
        [_,_,_,1,1,1,1,1,1,1,1,1,1,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

LEATHER_HIDE = (
    "leather", 164,
    {1: (40, 25, 15, 255),      # dark outline
     2: (150, 105, 55, 255),    # base brown
     3: (110, 75, 35, 255),     # shadow
     4: (180, 135, 75, 255),    # highlight
     5: (130, 90, 45, 255),     # stitch detail
     6: (95, 65, 30, 255)},     # fold shadow
    # Folded/rolled leather hide with stitching
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,1,4,4,4,4,4,2,2,3,1,_,_,_],
        [_,_,1,4,4,2,5,2,5,2,2,3,3,1,_,_],
        [_,_,1,4,2,2,2,2,2,2,5,3,3,1,_,_],
        [_,_,1,2,5,2,2,5,2,2,2,6,3,1,_,_],
        [_,_,1,2,2,2,5,2,2,5,6,6,3,1,_,_],
        [_,_,1,2,2,5,2,2,5,6,6,6,3,1,_,_],
        [_,_,1,3,6,2,2,6,6,6,6,3,3,1,_,_],
        [_,_,_,1,6,6,6,6,6,6,3,3,1,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

DIAMOND_SHARD = (
    "diamond_shard", 165,
    {1: (20, 40, 80, 255),      # dark outline
     2: (140, 190, 230, 255),   # base blue-white
     3: (90, 140, 190, 255),    # shadow blue
     4: (180, 220, 250, 255),   # highlight
     5: (240, 250, 255, 255),   # specular white
     6: (110, 165, 210, 255),   # mid blue
     7: (200, 235, 255, 255)},  # inner glow
    # Angular crystal with sparkle pixels
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,5,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,7,1,_,_,_,_,_,_],
        [_,_,_,_,_,1,5,4,4,7,1,_,5,_,_,_],
        [_,_,_,_,1,4,4,7,2,2,6,1,_,_,_,_],
        [_,_,_,1,4,7,4,2,2,6,6,3,1,_,_,_],
        [_,_,_,1,4,4,2,2,6,6,3,3,1,_,_,_],
        [_,_,_,_,1,2,2,6,6,3,3,1,_,_,_,_],
        [_,_,_,_,_,1,6,6,3,3,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,3,3,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ---- BLOCKS (2) ----

COBBLESTONE_BLOCK = (
    "cobblestone_block", 166,
    {1: (25, 25, 25, 255),      # dark outline
     2: (120, 115, 110, 255),   # base gray
     3: (80, 78, 75, 255),      # shadow/mortar
     4: (150, 145, 140, 255),   # highlight
     5: (100, 97, 93, 255),     # mid gray
     6: (140, 135, 128, 255)},  # light stone
    # Stacked gray stones with mortar lines
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,6,2,1,4,6,2,5,1,4,1,_,_],
        [_,_,1,6,2,5,1,6,2,5,3,1,2,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,6,1,4,6,2,1,4,6,2,1,_,_],
        [_,_,1,6,2,1,2,5,3,1,6,2,5,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,6,2,5,1,4,6,2,1,4,6,1,_,_],
        [_,_,1,2,5,3,1,6,2,5,1,2,5,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,6,1,4,6,2,5,1,4,2,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

WOOD_BARRICADE = (
    "wood_barricade", 167,
    {1: (35, 25, 10, 255),      # dark outline
     2: (150, 110, 55, 255),    # base brown
     3: (110, 80, 35, 255),     # shadow brown
     4: (180, 140, 75, 255),    # highlight brown
     5: (130, 95, 45, 255),     # mid brown
     6: (90, 90, 95, 255),      # nail gray
     7: (120, 85, 40, 255)},    # cross-brace
    # Vertical planks with cross-brace and nails
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,1,1,_,1,1,_,1,1,_,1,1,_,_,_],
        [_,_,1,4,1,1,4,1,1,4,1,1,4,1,_,_],
        [_,_,1,2,1,1,2,1,1,2,1,1,2,1,_,_],
        [_,_,1,2,1,1,7,1,1,2,1,1,2,1,_,_],
        [_,_,1,2,1,1,2,7,1,2,1,1,2,1,_,_],
        [_,_,1,6,1,1,2,1,7,6,1,1,2,1,_,_],
        [_,_,1,2,1,1,2,1,1,7,1,1,6,1,_,_],
        [_,_,1,2,1,1,2,1,1,2,7,1,2,1,_,_],
        [_,_,1,2,1,1,6,1,1,2,1,7,2,1,_,_],
        [_,_,1,2,1,1,2,1,1,2,1,1,6,1,_,_],
        [_,_,1,5,1,1,5,1,1,5,1,1,5,1,_,_],
        [_,_,1,3,1,1,3,1,1,3,1,1,3,1,_,_],
        [_,_,1,1,_,1,1,_,1,1,_,1,1,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ---- TOOLS / CONSUMABLES (4) ----

CRAFTED_TORCH = (
    "crafted_torch", 168,
    {1: (40, 25, 10, 255),      # dark outline
     2: (130, 90, 45, 255),     # stick brown
     3: (95, 65, 30, 255),      # stick shadow
     4: (160, 115, 60, 255),    # stick highlight
     5: (240, 180, 30, 255),    # flame yellow
     6: (250, 120, 20, 255),    # flame orange
     7: (220, 60, 15, 255),     # flame red
     8: (255, 230, 100, 255)},  # flame core
    # Brown stick with orange-yellow flame at top
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,8,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,8,5,8,_,_,_,_,_,_,_],
        [_,_,_,_,_,5,5,8,5,5,_,_,_,_,_,_],
        [_,_,_,_,_,6,5,5,5,6,_,_,_,_,_,_],
        [_,_,_,_,_,7,6,5,6,7,_,_,_,_,_,_],
        [_,_,_,_,_,_,7,6,7,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,4,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,2,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,2,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,2,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,3,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,3,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

BANDAGE = (
    "bandage", 169,
    {1: (60, 55, 50, 255),      # dark outline
     2: (230, 225, 215, 255),   # white cloth
     3: (195, 190, 180, 255),   # shadow cloth
     4: (245, 242, 235, 255),   # highlight
     5: (200, 50, 40, 255),     # red cross
     6: (170, 165, 155, 255)},  # deeper shadow
    # White cloth roll with red cross accent
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,1,4,4,2,2,3,1,_,_,_,_,_],
        [_,_,_,1,4,4,2,5,2,3,3,1,_,_,_,_],
        [_,_,_,1,4,2,5,5,5,2,3,1,_,_,_,_],
        [_,_,_,1,2,2,2,5,2,2,3,1,_,_,_,_],
        [_,_,_,1,2,2,2,2,2,3,3,1,_,_,_,_],
        [_,_,_,_,1,2,2,2,3,3,1,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,_,1,1,_,_,_],
        [_,_,_,_,_,_,_,_,_,1,4,2,3,1,_,_],
        [_,_,_,_,_,_,_,_,_,1,2,3,6,1,_,_],
        [_,_,_,_,_,_,_,_,_,_,1,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

MATERIAL_BAG = (
    "material_bag", 170,
    {1: (40, 28, 12, 255),      # dark outline
     2: (150, 110, 55, 255),    # base brown
     3: (110, 78, 35, 255),     # shadow
     4: (180, 140, 75, 255),    # highlight
     5: (130, 95, 48, 255),     # mid brown
     6: (90, 65, 30, 255),      # drawstring dark
     7: (170, 125, 65, 255)},   # drawstring
    # Brown leather sack with drawstring, bulging â€” follows SeedPouch style
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,7,1,7,_,_,_,_,_,_,_],
        [_,_,_,_,_,6,1,6,1,6,_,_,_,_,_,_],
        [_,_,_,_,1,1,5,2,5,1,1,_,_,_,_,_],
        [_,_,_,1,4,4,2,2,2,2,3,1,_,_,_,_],
        [_,_,1,4,4,2,2,2,2,2,2,3,1,_,_,_],
        [_,_,1,4,2,2,2,2,2,2,2,3,1,_,_,_],
        [_,_,1,4,2,2,2,2,2,2,5,3,1,_,_,_],
        [_,_,1,2,2,2,5,2,5,2,5,3,1,_,_,_],
        [_,_,1,2,5,2,2,5,2,5,3,3,1,_,_,_],
        [_,_,_,1,5,3,3,3,3,3,3,1,_,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

CRAFTING_KIT = (
    "crafting_kit", 171,
    {1: (35, 25, 15, 255),      # dark outline
     2: (140, 100, 50, 255),    # box brown
     3: (105, 72, 30, 255),     # box shadow
     4: (175, 135, 70, 255),    # box highlight
     5: (160, 160, 165, 255),   # metal clasp
     6: (120, 120, 125, 255),   # metal shadow
     7: (100, 80, 40, 255)},    # handle dark
    # Small toolbox with metal clasps, tools peeking out
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,5,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,7,7,1,_,_,_,_,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,4,4,5,6,6,5,4,4,4,1,_,_],
        [_,_,1,4,4,2,5,5,5,5,2,2,3,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,4,2,2,2,2,2,2,2,3,1,_,_],
        [_,_,1,4,2,2,2,2,2,2,2,3,3,1,_,_],
        [_,_,1,2,2,2,2,2,2,2,3,3,3,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ---- WEAPONS (6) ----

WOODEN_CLUB = (
    "wooden_club", 172,
    {1: (35, 25, 12, 255),      # dark outline
     2: (140, 100, 50, 255),    # base brown
     3: (100, 70, 30, 255),     # shadow
     4: (175, 135, 70, 255),    # highlight
     5: (120, 85, 40, 255),     # bark detail
     6: (160, 120, 60, 255)},   # mid highlight
    # Thick crude wooden club, rough bark texture
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,4,4,6,1,_,_,_,_,_],
        [_,_,_,_,_,1,4,6,5,2,2,1,_,_,_,_],
        [_,_,_,_,_,1,4,2,5,2,3,1,_,_,_,_],
        [_,_,_,_,_,1,6,2,5,2,3,1,_,_,_,_],
        [_,_,_,_,_,1,2,5,2,3,3,1,_,_,_,_],
        [_,_,_,_,_,_,1,2,5,3,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,2,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,2,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,3,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,3,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

STONE_DAGGER = (
    "stone_dagger", 173,
    {1: (25, 25, 25, 255),      # dark outline
     2: (130, 125, 120, 255),   # base stone gray
     3: (90, 85, 80, 255),      # shadow
     4: (160, 155, 148, 255),   # highlight
     5: (110, 80, 40, 255),     # handle brown
     6: (80, 55, 25, 255),      # handle shadow
     7: (70, 90, 50, 255)},     # binding green
    # Gray chipped stone blade, short, bound handle
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,4,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,4,2,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,4,2,3,1,_,_,_,_,_],
        [_,_,_,_,_,1,4,2,2,3,1,_,_,_,_,_],
        [_,_,_,_,_,1,2,2,3,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,2,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,7,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

STONE_AXE = (
    "stone_axe", 174,
    {1: (25, 25, 25, 255),      # dark outline
     2: (130, 125, 118, 255),   # stone gray base
     3: (90, 85, 80, 255),      # stone shadow
     4: (160, 155, 145, 255),   # stone highlight
     5: (130, 90, 45, 255),     # handle brown
     6: (95, 65, 30, 255),      # handle shadow
     7: (80, 100, 55, 255)},    # lashing
    # Stone head on wooden handle, lashed binding
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,4,4,2,1,_,_,_,_,_,_,_],
        [_,_,_,1,4,4,2,2,3,1,_,_,_,_,_,_],
        [_,_,_,1,4,2,2,3,3,1,_,_,_,_,_,_],
        [_,_,_,_,1,2,2,3,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,7,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,7,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

CRAFTED_IRON_SWORD = (
    "crafted_iron_sword", 175,
    {1: (20, 20, 25, 255),      # dark outline
     2: (120, 120, 130, 255),   # blade base
     3: (80, 80, 90, 255),      # blade shadow
     4: (165, 165, 178, 255),   # blade highlight
     5: (200, 200, 215, 255),   # blade specular
     6: (100, 70, 35, 255),     # grip brown
     7: (70, 50, 25, 255)},     # grip shadow
    # Dark steel blade, simple crossguard, leather grip
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,1,5,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,4,2,1,_,_,_,_],
        [_,_,_,_,_,_,_,1,4,2,3,1,_,_,_,_],
        [_,_,_,_,_,_,1,4,2,2,3,1,_,_,_,_],
        [_,_,_,_,_,1,4,2,2,3,1,_,_,_,_,_],
        [_,_,_,_,1,4,2,2,3,1,_,_,_,_,_,_],
        [_,_,_,_,1,2,2,3,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,2,1,_,_,_,_,_,_,_,_],
        [_,_,_,1,1,1,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,7,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

CRAFTED_IRON_MACE = (
    "crafted_iron_mace", 176,
    {1: (20, 20, 25, 255),      # dark outline
     2: (110, 110, 118, 255),   # head base
     3: (75, 75, 85, 255),      # head shadow
     4: (150, 150, 162, 255),   # head highlight
     5: (180, 180, 195, 255),   # head specular
     6: (120, 85, 42, 255),     # handle brown
     7: (85, 60, 28, 255)},     # handle shadow
    # Heavy dark metal flanged head on wooden handle
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,5,4,2,1,_,_,_,_,_,_],
        [_,_,_,_,1,5,4,2,2,3,1,_,_,_,_,_],
        [_,_,_,_,1,4,2,2,2,3,1,_,_,_,_,_],
        [_,_,_,_,1,4,2,2,3,3,1,_,_,_,_,_],
        [_,_,_,_,_,1,2,3,3,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,7,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

DIAMOND_BLADE = (
    "diamond_blade", 177,
    {1: (15, 30, 65, 255),      # dark outline
     2: (120, 175, 220, 255),   # blade blue base
     3: (80, 130, 180, 255),    # blade shadow
     4: (170, 210, 245, 255),   # blade highlight
     5: (230, 245, 255, 255),   # sparkle white
     6: (100, 70, 35, 255),     # grip brown
     7: (200, 170, 50, 255),    # hilt gold
     8: (150, 200, 235, 255)},  # mid blue
    # Bright blue-white crystalline blade, ornate hilt, sparkles
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,5,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,5,4,1,_,_,_,_],
        [_,_,_,_,_,_,_,1,4,4,8,1,_,_,_,_],
        [_,_,_,_,_,5,1,4,4,8,2,1,_,_,_,_],
        [_,_,_,_,_,_,1,4,8,2,3,1,_,_,_,_],
        [_,_,_,_,_,1,4,8,2,3,1,_,_,_,_,_],
        [_,_,_,_,1,4,8,2,3,1,_,_,_,_,_,_],
        [_,_,_,_,1,8,2,3,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,2,1,_,_,_,_,_,_,_,_],
        [_,_,_,1,7,1,1,1,7,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,6,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,7,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ---- ARMOR (4) ----

LEATHER_TUNIC = (
    "leather_tunic", 178,
    {1: (40, 28, 12, 255),      # dark outline
     2: (155, 110, 58, 255),    # base brown
     3: (115, 78, 38, 255),     # shadow
     4: (185, 140, 78, 255),    # highlight
     5: (130, 92, 48, 255),     # stitch
     6: (100, 68, 32, 255)},    # deep shadow
    # Simple brown leather vest with stitching
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,1,4,4,4,1,1,4,4,2,1,_,_,_],
        [_,_,1,4,4,2,1,_,_,1,2,2,3,1,_,_],
        [_,_,1,4,2,2,1,_,_,1,2,3,3,1,_,_],
        [_,_,_,1,2,2,5,1,1,5,2,3,1,_,_,_],
        [_,_,_,1,4,2,2,5,5,2,2,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,2,3,3,1,_,_,_],
        [_,_,_,1,2,2,5,2,2,5,3,3,1,_,_,_],
        [_,_,_,1,2,5,2,2,2,2,5,3,1,_,_,_],
        [_,_,_,1,2,2,2,2,2,2,3,3,1,_,_,_],
        [_,_,_,_,1,3,6,3,3,6,3,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

CHAIN_VEST = (
    "chain_vest", 179,
    {1: (30, 30, 35, 255),      # dark outline
     2: (145, 145, 155, 255),   # base silver
     3: (105, 105, 115, 255),   # shadow
     4: (180, 180, 192, 255),   # highlight
     5: (200, 200, 215, 255),   # specular ring
     6: (125, 125, 135, 255)},  # mid tone
    # Interlocking gray-silver rings, sleeveless
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,1,5,4,2,1,1,4,5,2,1,_,_,_],
        [_,_,1,4,5,2,1,_,_,1,2,5,3,1,_,_],
        [_,_,1,5,2,6,1,_,_,1,6,2,3,1,_,_],
        [_,_,_,1,6,2,5,1,1,5,2,3,1,_,_,_],
        [_,_,_,1,5,4,2,5,5,2,4,3,1,_,_,_],
        [_,_,_,1,4,2,5,2,2,5,2,3,1,_,_,_],
        [_,_,_,1,5,2,2,5,5,2,2,3,1,_,_,_],
        [_,_,_,1,2,5,2,2,2,2,5,3,1,_,_,_],
        [_,_,_,1,2,2,5,2,2,5,2,3,1,_,_,_],
        [_,_,_,_,1,6,2,5,5,2,6,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

CRAFTED_IRON_PLATE = (
    "crafted_iron_plate", 180,
    {1: (20, 20, 25, 255),      # dark outline
     2: (100, 100, 110, 255),   # base dark metal
     3: (65, 65, 75, 255),      # shadow
     4: (140, 140, 155, 255),   # highlight
     5: (170, 170, 185, 255),   # specular
     6: (85, 85, 95, 255)},     # mid tone
    # Dark heavy plate armor, full coverage
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,1,5,4,4,1,1,5,4,2,1,_,_,_],
        [_,_,1,5,4,2,1,_,_,1,2,4,3,1,_,_],
        [_,_,1,4,2,6,1,_,_,1,6,2,3,1,_,_],
        [_,_,1,1,6,2,4,1,1,4,2,6,1,1,_,_],
        [_,_,_,1,5,4,2,2,2,2,4,3,1,_,_,_],
        [_,_,_,1,4,4,2,2,2,2,2,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,2,6,3,1,_,_,_],
        [_,_,_,1,2,2,6,2,2,6,2,3,1,_,_,_],
        [_,_,_,1,2,6,2,2,2,2,6,3,1,_,_,_],
        [_,_,_,1,1,6,3,3,3,3,6,1,1,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

DIAMOND_MAIL = (
    "diamond_mail", 181,
    {1: (15, 30, 60, 255),      # dark outline
     2: (120, 170, 215, 255),   # base blue
     3: (80, 125, 175, 255),    # shadow
     4: (165, 205, 240, 255),   # highlight
     5: (230, 245, 255, 255),   # diamond sparkle
     6: (100, 150, 200, 255),   # mid blue
     7: (200, 230, 250, 255)},  # light sparkle
    # Sparkling blue-tinted chainmail with diamond studs
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,1,5,4,7,1,1,5,7,4,1,_,_,_],
        [_,_,1,4,7,2,1,_,_,1,2,7,3,1,_,_],
        [_,_,1,7,2,6,1,_,_,1,6,2,3,1,_,_],
        [_,_,_,1,6,2,5,1,1,5,2,3,1,_,_,_],
        [_,_,_,1,7,4,5,2,2,5,4,3,1,_,_,_],
        [_,_,_,1,4,5,2,7,7,2,5,3,1,_,_,_],
        [_,_,_,1,7,2,5,2,2,5,2,3,1,_,_,_],
        [_,_,_,1,2,5,2,7,7,2,5,3,1,_,_,_],
        [_,_,_,1,2,2,5,2,2,5,2,3,1,_,_,_],
        [_,_,_,_,1,6,2,5,5,2,6,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ---- All sprites ----

CRAFTING_SPRITES = [
    # Materials
    COBBLESTONE, FIBER, STICK, WOOD_PLANK, IRON_ORE,
    IRON_INGOT, GOLD_ORE, GOLD_INGOT, LEATHER_HIDE, DIAMOND_SHARD,
    # Blocks
    COBBLESTONE_BLOCK, WOOD_BARRICADE,
    # Tools/Consumables
    CRAFTED_TORCH, BANDAGE, MATERIAL_BAG, CRAFTING_KIT,
    # Weapons
    WOODEN_CLUB, STONE_DAGGER, STONE_AXE, CRAFTED_IRON_SWORD,
    CRAFTED_IRON_MACE, DIAMOND_BLADE,
    # Armor
    LEATHER_TUNIC, CHAIN_VEST, CRAFTED_IRON_PLATE, DIAMOND_MAIL,
]


def create_sprite(name, palette, grid):
    """Render a 16x16 pixel-art sprite from a palette-indexed grid."""
    img = Image.new("RGBA", (TILE_SIZE, TILE_SIZE), (0, 0, 0, 0))
    pixels = img.load()
    for y, row in enumerate(grid):
        for x, val in enumerate(row):
            if val != 0 and val in palette:
                pixels[x, y] = palette[val]
    return img


def main():
    os.makedirs(OUTPUT_DIR, exist_ok=True)

    # Create individual PNGs
    placeholders = {}
    for name, index, palette, grid in CRAFTING_SPRITES:
        img = create_sprite(name, palette, grid)
        out_path = os.path.join(OUTPUT_DIR, f"{name}.png")
        img.save(out_path)
        placeholders[index] = img
        print(f"  Created {out_path}")

    # Load existing items.png
    items = Image.open(ITEMS_PNG).convert("RGBA")
    old_w, old_h = items.size
    print(f"  Original items.png: {old_w}x{old_h}")

    # Need indices 156-181 -> rows 19-22 (0-indexed).
    # That's 23 rows = 368px tall.
    needed_h = (max(idx for _, idx, _, _ in CRAFTING_SPRITES) // COLS + 1) * TILE_SIZE
    new_h = max(old_h, needed_h)
    if new_h > old_h:
        new_items = Image.new("RGBA", (old_w, new_h), (0, 0, 0, 0))
        new_items.paste(items, (0, 0))
        print(f"  Extended sheet from {old_h}px to {new_h}px tall")
    else:
        new_items = items

    # Place each sprite at its grid position
    for name, index, palette, grid in CRAFTING_SPRITES:
        col = index % COLS
        row = index // COLS
        x = col * TILE_SIZE
        y = row * TILE_SIZE
        new_items.paste(placeholders[index], (x, y))
        print(f"  Placed {name} at index {index} (row={row}, col={col}, x={x}, y={y})")

    new_items.save(ITEMS_PNG)
    final_w, final_h = new_items.size
    print(f"  Saved items.png: {final_w}x{final_h}")
    print(f"  Total crafting sprites: {len(CRAFTING_SPRITES)}")


if __name__ == "__main__":
    main()
