#!/usr/bin/env python3
"""Create hand-crafted 16x16 pixel-art farming sprites and extend items.png.

Farming item indices 188-204 in ItemSpriteSheet:
  188 HOE, 189 BONE, 190 BONEMEAL, 191 WOODEN_BOWL,
  192 WATER_BUCKET, 193 PLANTER_BOX,
  194-197 SEED_WHEAT/CARROT/POTATO/MELON,
  198-201 WHEAT/CARROT/POTATO/MELON_SLICE,
  202-204 BREAD/BAKED_POTATO/RABBIT_STEW
"""

import os
from PIL import Image

SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))
PROJECT_ROOT = os.path.join(SCRIPT_DIR, "..", "..")
ITEMS_PNG = os.path.join(PROJECT_ROOT, "app", "src", "main", "assets", "items.png")
OUTPUT_DIR = os.path.join(SCRIPT_DIR, "output")

TILE_SIZE = 16
COLS = 8  # items.png is 128px wide = 8 columns of 16px

_ = 0  # Transparent

# ============================================================
# TOOLS & MATERIALS (188-193)
# ============================================================

HOE = (
    "hoe", 188,
    {1: (35, 25, 12, 255),     # dark outline
     2: (130, 95, 55, 255),    # handle brown
     3: (165, 125, 75, 255),   # handle highlight
     4: (100, 70, 38, 255),    # handle shadow
     5: (140, 140, 135, 255),  # blade gray
     6: (105, 105, 100, 255),  # blade shadow
     7: (175, 175, 170, 255)}, # blade highlight
    # Diagonal hoe: handle lower-left, blade upper-right
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,1,1,1,1,_,_,_],
        [_,_,_,_,_,_,_,_,1,7,5,5,6,1,_,_],
        [_,_,_,_,_,_,_,_,1,5,5,6,6,1,_,_],
        [_,_,_,_,_,_,_,_,_,1,1,1,1,_,_,_],
        [_,_,_,_,_,_,_,_,1,3,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,3,2,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,3,2,1,_,_,_,_,_,_],
        [_,_,_,_,_,1,3,2,4,1,_,_,_,_,_,_],
        [_,_,_,_,1,3,2,4,1,_,_,_,_,_,_,_],
        [_,_,_,1,3,2,4,1,_,_,_,_,_,_,_,_],
        [_,_,1,3,2,4,1,_,_,_,_,_,_,_,_,_],
        [_,_,1,2,4,1,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,1,1,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

BONE = (
    "bone", 189,
    {1: (60, 55, 45, 255),     # dark outline
     2: (220, 210, 195, 255),  # bone white
     3: (195, 185, 168, 255),  # bone shadow
     4: (240, 235, 225, 255),  # bone highlight
     5: (175, 165, 148, 255)}, # bone dark
    # Classic bone shape - horizontal with round ends
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,1,1,_,_,_,_,_,_,_,_,1,1,_,_],
        [_,1,4,4,1,_,_,_,_,_,_,1,4,2,1,_],
        [_,1,4,2,1,_,_,_,_,_,_,1,2,3,1,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,_,1,4,2,2,2,2,2,2,3,1,_,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,1,4,2,1,_,_,_,_,_,_,1,4,3,1,_],
        [_,1,2,3,1,_,_,_,_,_,_,1,3,5,1,_],
        [_,_,1,1,_,_,_,_,_,_,_,_,1,1,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

BONEMEAL = (
    "bonemeal", 190,
    {1: (60, 55, 45, 255),     # outline
     2: (230, 225, 215, 255),  # white powder
     3: (200, 195, 180, 255),  # powder shadow
     4: (245, 240, 235, 255),  # powder highlight
     5: (180, 175, 160, 255)}, # darker bits
    # Small pile of white powder/granules
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,4,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,4,2,4,_,_,_,_,_,_,_],
        [_,_,_,_,_,4,2,2,2,4,_,_,_,_,_,_],
        [_,_,_,_,1,2,2,4,2,2,1,_,_,_,_,_],
        [_,_,_,1,4,2,4,2,4,2,3,1,_,_,_,_],
        [_,_,1,4,2,2,2,2,2,2,2,3,1,_,_,_],
        [_,1,4,2,2,5,2,2,5,2,2,3,3,1,_,_],
        [_,1,2,2,5,2,2,2,2,5,2,3,3,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

WOODEN_BOWL = (
    "wooden_bowl", 191,
    {1: (45, 30, 15, 255),     # dark outline
     2: (150, 110, 60, 255),   # wood base
     3: (120, 85, 42, 255),    # wood shadow
     4: (180, 140, 80, 255),   # wood highlight
     5: (100, 70, 35, 255)},   # inner shadow
    # Simple round wooden bowl
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,1,4,4,4,4,2,2,1,_,_,_,_],
        [_,_,_,1,4,5,5,5,5,5,2,3,1,_,_,_],
        [_,_,1,1,4,5,5,5,5,5,2,3,1,1,_,_],
        [_,_,1,4,1,1,1,1,1,1,1,3,3,1,_,_],
        [_,_,_,1,4,2,2,2,2,2,3,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,2,3,3,1,_,_,_],
        [_,_,_,_,1,2,2,2,2,3,3,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

WATER_BUCKET = (
    "water_bucket", 192,
    {1: (40, 35, 25, 255),     # dark outline
     2: (130, 130, 125, 255),  # metal base
     3: (100, 100, 95, 255),   # metal shadow
     4: (165, 165, 160, 255),  # metal highlight
     5: (70, 130, 200, 255),   # water blue
     6: (100, 165, 225, 255),  # water highlight
     7: (50, 100, 170, 255)},  # water dark
    # Metal bucket with water visible at top
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,1,4,2,2,2,2,3,1,_,_,_,_],
        [_,_,_,1,1,6,5,5,5,5,7,1,1,_,_,_],
        [_,_,_,1,4,6,5,6,5,5,7,3,1,_,_,_],
        [_,_,_,1,4,1,1,1,1,1,1,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,2,2,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,2,2,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,2,3,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,3,3,3,1,_,_,_],
        [_,_,_,_,1,2,2,2,2,3,3,1,_,_,_,_],
        [_,_,_,_,_,1,3,3,3,3,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

PLANTER_BOX = (
    "planter_box", 193,
    {1: (40, 28, 12, 255),     # dark outline
     2: (140, 100, 50, 255),   # wood base
     3: (110, 75, 35, 255),    # wood shadow
     4: (170, 130, 70, 255),   # wood highlight
     5: (80, 60, 35, 255),     # soil dark
     6: (110, 85, 50, 255),    # soil base
     7: (60, 130, 40, 255)},   # sprout green
    # Wooden box with soil and tiny green sprout
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,7,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,7,7,7,_,_,_,_,_,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,6,5,6,6,5,6,5,6,6,5,1,_,_],
        [_,_,1,5,6,5,5,6,5,6,5,5,6,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,1,4,2,2,2,2,2,2,2,2,3,1,_,_],
        [_,_,1,4,2,2,2,2,2,2,2,3,3,1,_,_],
        [_,_,1,4,2,2,2,2,2,2,3,3,3,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ============================================================
# CROP SEEDS (194-197) — small seed packets/grains
# ============================================================

SEED_WHEAT = (
    "seed_wheat", 194,
    {1: (50, 40, 15, 255),     # outline
     2: (200, 170, 50, 255),   # golden
     3: (230, 200, 80, 255),   # golden highlight
     4: (160, 130, 30, 255),   # golden shadow
     5: (60, 120, 35, 255)},   # leaf green
    # Small golden wheat grains with a leaf
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,5,5,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,3,2,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,2,4,1,_,1,1,_,_,_,_,_],
        [_,_,_,_,_,1,1,_,1,3,2,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,2,4,1,_,_,_,_],
        [_,_,_,_,_,1,1,_,_,1,1,_,_,_,_,_],
        [_,_,_,_,1,3,2,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,2,4,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

SEED_CARROT = (
    "seed_carrot", 195,
    {1: (40, 30, 15, 255),     # outline
     2: (160, 100, 30, 255),   # brown seed
     3: (190, 130, 50, 255),   # seed highlight
     4: (120, 70, 20, 255),    # seed shadow
     5: (60, 130, 40, 255)},   # leaf green
    # Small brown seeds with green leaf marker
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,5,5,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,3,2,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,2,4,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,_,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,3,2,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,2,4,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

SEED_POTATO = (
    "seed_potato", 196,
    {1: (35, 30, 18, 255),     # outline
     2: (170, 140, 80, 255),   # tan base
     3: (200, 170, 105, 255),  # tan highlight
     4: (130, 105, 55, 255),   # tan shadow
     5: (60, 120, 40, 255)},   # leaf green
    # Small tan potato eyes/tuber seeds
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,5,5,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,3,2,2,1,_,_,_,_,_,_,_],
        [_,_,_,_,1,2,2,4,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,3,2,2,1,_,_,_,_],
        [_,_,_,_,_,_,_,1,2,2,4,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

SEED_MELON = (
    "seed_melon", 197,
    {1: (25, 35, 15, 255),     # outline
     2: (180, 170, 140, 255),  # seed cream
     3: (210, 200, 170, 255),  # seed highlight
     4: (140, 130, 100, 255),  # seed shadow
     5: (60, 130, 40, 255)},   # leaf green
    # Flat oval melon seeds
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,5,5,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,3,2,4,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,1,1,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,3,2,4,1,_,_,_],
        [_,_,_,_,_,_,_,_,_,1,1,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,1,3,2,4,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ============================================================
# PRODUCE (198-201)
# ============================================================

WHEAT_ITEM = (
    "wheat", 198,
    {1: (50, 35, 10, 255),     # outline
     2: (210, 180, 50, 255),   # golden base
     3: (240, 215, 80, 255),   # golden highlight
     4: (170, 140, 35, 255),   # golden shadow
     5: (55, 115, 35, 255)},   # stem green
    # Bundle of golden wheat stalks
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,3,3,_,_,3,3,_,_,_,_,_],
        [_,_,_,_,3,2,2,3,3,2,2,3,_,_,_,_],
        [_,_,_,_,4,2,2,4,4,2,2,4,_,_,_,_],
        [_,_,_,_,_,1,5,_,_,5,1,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,1,1,5,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,5,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,_,5,_,_,5,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,_,_,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

CARROT_ITEM = (
    "carrot", 199,
    {1: (50, 25, 10, 255),     # outline
     2: (230, 140, 35, 255),   # orange base
     3: (250, 175, 55, 255),   # orange highlight
     4: (185, 100, 20, 255),   # orange shadow
     5: (60, 140, 40, 255),    # green top
     6: (85, 170, 55, 255)},   # green highlight
    # Orange carrot with green leafy top
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,6,_,6,6,_,6,_,_,_,_,_],
        [_,_,_,_,_,_,5,5,5,5,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,5,5,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,1,3,2,2,3,1,_,_,_,_,_],
        [_,_,_,_,_,1,3,2,2,2,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,2,2,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,2,2,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,4,2,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,4,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

POTATO_ITEM = (
    "potato", 200,
    {1: (50, 35, 15, 255),     # outline
     2: (175, 145, 85, 255),   # tan base
     3: (205, 175, 110, 255),  # tan highlight
     4: (135, 105, 55, 255),   # tan shadow
     5: (100, 78, 40, 255)},   # dark spots/eyes
    # Lumpy brown potato
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,1,3,3,2,2,1,_,_,_,_,_],
        [_,_,_,_,1,3,3,2,2,5,2,1,_,_,_,_],
        [_,_,_,1,3,3,2,2,5,2,2,4,1,_,_,_],
        [_,_,_,1,3,2,2,5,2,2,2,4,1,_,_,_],
        [_,_,_,1,2,2,5,2,2,2,4,4,1,_,_,_],
        [_,_,_,_,1,2,2,2,2,4,4,1,_,_,_,_],
        [_,_,_,_,_,1,4,4,4,4,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

MELON_SLICE = (
    "melon_slice", 201,
    {1: (15, 40, 15, 255),     # outline
     2: (60, 140, 45, 255),    # rind green
     3: (85, 170, 60, 255),    # rind highlight
     4: (220, 80, 70, 255),    # flesh red
     5: (240, 120, 100, 255),  # flesh highlight
     6: (180, 55, 45, 255),    # flesh shadow
     7: (30, 25, 20, 255)},    # seeds dark
    # Triangular melon slice with green rind and red flesh
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,1,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,1,5,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,5,4,4,1,_,_,_,_,_],
        [_,_,_,_,_,1,5,4,7,4,4,1,_,_,_,_],
        [_,_,_,_,1,5,4,4,4,7,4,6,1,_,_,_],
        [_,_,_,1,5,4,7,4,4,4,4,6,6,1,_,_],
        [_,_,1,5,4,4,4,4,7,4,4,6,6,1,_,_],
        [_,_,1,1,1,1,1,1,1,1,1,1,1,1,_,_],
        [_,_,_,1,3,2,2,2,2,2,2,2,1,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ============================================================
# COOKED FOOD (202-204)
# ============================================================

BREAD = (
    "bread", 202,
    {1: (60, 40, 15, 255),     # dark outline
     2: (190, 145, 55, 255),   # crust base
     3: (155, 110, 38, 255),   # crust shadow
     4: (220, 178, 85, 255),   # crust highlight
     5: (240, 200, 110, 255),  # top highlight
     6: (170, 125, 45, 255)},  # score line
    # Golden round bread loaf with score marks
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,1,5,5,5,5,4,4,1,_,_,_,_],
        [_,_,_,1,5,5,4,6,4,4,4,2,1,_,_,_],
        [_,_,1,5,4,4,6,4,6,4,4,2,2,1,_,_],
        [_,_,1,4,4,6,4,4,4,6,2,2,3,1,_,_],
        [_,_,1,4,4,4,4,4,4,4,2,2,3,1,_,_],
        [_,_,1,4,2,2,2,2,2,2,2,3,3,1,_,_],
        [_,_,1,2,2,2,2,2,2,2,3,3,3,1,_,_],
        [_,_,_,1,2,3,2,2,3,2,3,3,1,_,_,_],
        [_,_,_,_,1,1,1,1,1,1,1,1,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

BAKED_POTATO = (
    "baked_potato", 203,
    {1: (50, 35, 15, 255),     # outline
     2: (165, 130, 70, 255),   # skin base
     3: (195, 160, 95, 255),   # skin highlight
     4: (125, 95, 45, 255),    # skin shadow
     5: (240, 220, 130, 255),  # butter/inside yellow
     6: (210, 190, 100, 255),  # inside shadow
     7: (255, 245, 200, 255)}, # steam white
    # Split baked potato with butter and steam
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,7,_,_,7,_,_,_,_,_,_],
        [_,_,_,_,_,7,_,_,7,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,1,1,5,5,5,5,1,1,_,_,_,_],
        [_,_,_,1,3,1,5,7,5,6,1,4,1,_,_,_],
        [_,_,1,3,2,1,5,5,6,6,1,4,4,1,_,_],
        [_,_,1,3,2,2,1,1,1,1,2,4,4,1,_,_],
        [_,_,1,3,2,2,2,2,2,2,2,4,4,1,_,_],
        [_,_,_,1,2,2,2,2,2,2,4,4,1,_,_,_],
        [_,_,_,_,1,2,2,2,2,4,4,1,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

RABBIT_STEW = (
    "rabbit_stew", 204,
    {1: (40, 30, 20, 255),     # dark outline
     2: (140, 100, 60, 255),   # bowl brown
     3: (110, 75, 40, 255),    # bowl shadow
     4: (170, 130, 80, 255),   # bowl highlight
     5: (160, 100, 40, 255),   # stew base
     6: (130, 75, 25, 255),    # stew shadow
     7: (190, 130, 60, 255),   # meat chunk
     8: (240, 230, 210, 255)}, # steam
    # Bowl of hearty stew with steam
    [
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,8,_,_,8,_,_,_,_,_],
        [_,_,_,_,_,_,8,_,_,8,_,_,_,_,_,_],
        [_,_,_,_,_,1,1,1,1,1,1,_,_,_,_,_],
        [_,_,_,_,1,5,7,5,7,5,6,1,_,_,_,_],
        [_,_,_,1,5,5,5,7,5,5,5,6,1,_,_,_],
        [_,_,1,1,5,7,5,5,5,7,6,6,1,1,_,_],
        [_,_,1,4,1,1,1,1,1,1,1,1,3,1,_,_],
        [_,_,_,1,4,2,2,2,2,2,2,3,1,_,_,_],
        [_,_,_,1,4,2,2,2,2,2,3,3,1,_,_,_],
        [_,_,_,_,1,2,2,2,2,3,3,1,_,_,_,_],
        [_,_,_,_,_,1,3,3,3,3,1,_,_,_,_,_],
        [_,_,_,_,_,_,1,1,1,1,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
        [_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],
    ]
)

# ============================================================

FARMING_ITEMS = [
    HOE, BONE, BONEMEAL, WOODEN_BOWL, WATER_BUCKET, PLANTER_BOX,
    SEED_WHEAT, SEED_CARROT, SEED_POTATO, SEED_MELON,
    WHEAT_ITEM, CARROT_ITEM, POTATO_ITEM, MELON_SLICE,
    BREAD, BAKED_POTATO, RABBIT_STEW,
]


def create_sprite(palette, grid):
    """Render a 16x16 pixel-art sprite from a palette-indexed grid."""
    img = Image.new("RGBA", (TILE_SIZE, TILE_SIZE), (0, 0, 0, 0))
    pixels = img.load()
    for y, row in enumerate(grid):
        for x, val in enumerate(row):
            if val != 0 and val in palette:
                pixels[x, y] = palette[val]
    return img


def main():
    os.makedirs(OUTPUT_DIR, exist_ok=True)

    # Create individual PNGs
    placeholders = {}
    for name, index, palette, grid in FARMING_ITEMS:
        img = create_sprite(palette, grid)
        out_path = os.path.join(OUTPUT_DIR, f"{name}.png")
        img.save(out_path)
        placeholders[index] = img
        print(f"  Created {out_path}")

    # Load existing items.png
    items = Image.open(ITEMS_PNG).convert("RGBA")
    old_w, old_h = items.size
    print(f"  Original items.png: {old_w}x{old_h}")

    # Compute needed height: highest index is 204 → row 25 → need 26 rows = 416px
    max_index = max(idx for _, idx, _, _ in FARMING_ITEMS)
    needed_h = (max_index // COLS + 1) * TILE_SIZE
    new_h = max(old_h, needed_h)

    if new_h > old_h:
        new_items = Image.new("RGBA", (old_w, new_h), (0, 0, 0, 0))
        new_items.paste(items, (0, 0))
        print(f"  Extended items.png to {old_w}x{new_h}")
    else:
        new_items = items

    # Place each sprite at its grid position
    for name, index, palette, grid in FARMING_ITEMS:
        col = index % COLS
        row = index // COLS
        x = col * TILE_SIZE
        y = row * TILE_SIZE
        new_items.paste(placeholders[index], (x, y))
        print(f"  Placed {name} at index {index} (row={row}, col={col}, x={x}, y={y})")

    new_items.save(ITEMS_PNG)
    final_w, final_h = new_items.size
    print(f"\n  Saved items.png: {final_w}x{final_h}")


if __name__ == "__main__":
    main()
